<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>index</title>
    <style></style>
    <script src="https://cdn.bootcdn.net/ajax/libs/axios/1.3.2/axios.js"></script>
  </head>
  <style>
    #tanchu{
      width: 100px;
      height: 100px;
      background-color:aqua;
      display: none;
    }
  </style>
  <body>
    <h1><div id="char_header">100</div></h1>
    <div>当前时间:<span id="time"></span></div>
    <div id="input">
      <span>用户名:</span><input type="text" id="input_username" />
      <br />
      <span>用户id:</span><input type="text" id="input_userID" />
    </div>
    <div id="button">
      <button id="loggin">查找</button>
      <div id="tanchu">
        <input type="text" value="hahaah" id="inp" style=width:90px;>
        <button id="ins" style="width:20px;">确定</button>
      </div>
      <table id="header_body">
        <tr>
          <th>username</th>
          <th>userid</th>
          <th>role</th>
          <th>button</th>
          <th>check</th>
        </tr>
      </table>
      <table id="main_body">
        <tr>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </table>
    </div>
  </body>
  <script src="index.js"></script>
  <script>
    const table = document.getElementById("main_body");
    const table1 = document.getElementById("header_body");
    const num = document.getElementById("input_userID");
    const name = document.getElementById("input_username");
    const bt = document.getElementById("loggin");//search for sth
    window.addEventListener("load", () => {
      axios({
        url: "https://api.reginvolver.cn/user/list",
        method: "GET",
      }).then((result) => {
        const arr = result.data.data.records;//请求主体
//主体表格
        for (let i=0; i < arr.length; i++) {
          const tr = document.createElement("tr");
          tr.innerHTML = `<tr>
    <td>${arr[i].username}</td>
    <td>${arr[i].userId}</td>
    <td>${arr[i].role}</td>
    <td><button class="yang">弹出</button></td>
    <td><button class="tang">变换</button></td>
    <td><input type="checkbox" style="width: 15px;height: 15px; class="check"></td>
  </tr>`;
          table.appendChild(tr);
          const bts = document.getElementsByClassName("yang")[i];//主体
          bts.do =()=>{
            const div = document.getElementById("tanchu");
            const inp = document.getElementById("inp");
            div.style.display="block";
            inp.value=`${arr[i].username}`
          }
          const btn = document.getElementsByClassName("tang")[i];
          btn.onclick=()=>{
            const char = document.getElementById("char_header");
            char.innerHTML = arr[i].userId;
          }
          const check = document.getElementsByClassName("check")[i];
        }

      })
    })
  </script>
</html>
